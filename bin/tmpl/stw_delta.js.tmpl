/**
 * Created by Neubert Joachim on 12.02.2015.
 *
 * Adapted from http://www.highcharts.com/demo/bar-negative-stack
 */
$(function () {
  var categories = [ <tmpl_var name="categories" /> ];
  <tmpl_if name="is_diff">
  Highcharts.setOptions({
    colors: ['#ED561B', '#50B432']
  });
  </tmpl_if>
  $(document).ready(function () {
    $('#container').highcharts({
      chart: {
        type: 'bar',
        height: <tmpl_var name="height" />
      },
      title: {
        text: '<tmpl_var name="title" />'
      },
      subtitle: {
        text: '<tmpl_var name="subtitle" />'
      },
      xAxis: [{
        categories: categories,
        reversed: true,
        labels: {
          step: 1
        }
      }],
      yAxis: {
        title: {
          text: null
        },
        labels: {
          formatter: function () {
            return (Math.abs(this.value));
          }
        },
        min: -<tmpl_var name="grid_width" />,
        max: <tmpl_var name="grid_width" />
      },

      plotOptions: {
        series: {
          stacking: 'normal'
        }
      },

      tooltip: {
        formatter: function () {
          return this.point.category + '<br />' + this.series.name +
              ': ' + Highcharts.numberFormat(Math.abs(this.point.y), 0);
        }
      },
      series: [{
        name: '<tmpl_var name="header1" />',
        data: [ <tmpl_var name="data1" /> ]
      }, {
        name: '<tmpl_var name="header2" />',
        data: [ <tmpl_var name="data2" /> ]
      }]
    });
  });
});
